<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>View Messages</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="https://www.greenriver.edu/favicon.ico">

    <!--Style sheets-->
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.1/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.18/css/dataTables.bootstrap4.min.css"/>
    <link type="text/css" rel="stylesheet" href="{{@BASE}}/styles/main.css">
    <link type="text/css" rel="stylesheet" href="{{@BASE}}/styles/viewMessages.css">

    <!-- Javascript-->
    <script src="http://code.jquery.com/jquery.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.18/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.18/js/dataTables.bootstrap4.min.js"></script>
    <script src="{{@BASE}}/js/messageTable.js"></script>
</head>
<body>
    <header class="header clearfix" id="mainHeader">
        <a href="profile"><h1>Green River Messaging</h1></a>
        <a href="http://greenrivertech.net/index.php">GR TECH</a>
        <a href="http://gatorlock.greenriverdev.com/">GatorLock</a>
        <a href="logout"><h1 id="logout">Log out</h1></a>
    </header>

    <div class="container-fluid" id="mainContainer">

        <h2 id="regHeader">Messages</h2>
        <a class="link" href="profile">Profile</a>
        <a class="link" href="message">Send Message</button></a>
        <hr>

        <div id="filterData">
            <h2>Filter By:</h2>
            <repeat group="{{ @programs }}" value="{{ @program }}">
                <div class="rows">
                    <input type="checkbox" name="chosenPrograms[]" value="{{@program}}" checked>
                    <label>{{ @program }}</label><br>
                </div>
            </repeat>
        </div>

        <!--DataTable-->
        <table id="messagesTable" class="table table-striped table-bordered table-hover">
            <thead>
            <tr>
                <th>Sent By:</th>
                <th>Message:</th>
                <th>Recipient(s): </th>
                <th>Date: </th>
            </tr>
            </thead>

            <tbody>
            <repeat group="{{@messages}}" value="{{@message}}">
            <tr>
                <td>{{ str_replace(array("greenriver.edu", "@"), "", @message['instructorEmail']) }} </td>
                <td>{{ @message['content'] }} </td>
                <td>{{ str_replace(", ", "<br>", @message['recipient']) }} </td>
                <td>{{ @message['datetime'] }}</td>
            </tr>
            </repeat>
            </tbody>
        </table>
    </div> <!-- /container -->
</body>
</html>